<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent 6 - Corrected Root Integration Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .container {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 40px;
      border: 1px solid rgba(255,255,255,0.2);
      max-width: 800px;
      width: 100%;
      text-align: center;
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 30px;
    }
    
    .demo-section {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      border-left: 4px solid #667eea;
    }
    
    .demo-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 15px;
    }
    
    .controls {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .result {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
    }
    
    .success { border-left: 4px solid #2ecc71; }
    .error { border-left: 4px solid #e74c3c; }
    .info { border-left: 4px solid #3498db; }
    
    .status {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
      font-size: 0.8rem;
      opacity: 0.8;
    }
    
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      .controls { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üöÄ Agent 6 - Corrected Root Integration</h1>
    <p class="subtitle">Fixed integration with correct method names</p>
    
    <div class="demo-section">
      <div class="demo-title">ü§ñ AI/ML Modules</div>
      <div class="controls">
        <button class="btn" onclick="testLeadScoring()">Test Lead Scoring</button>
        <button class="btn" onclick="testCustomerLifetimeValue()">Test CLV</button>
        <button class="btn" onclick="testComputerVision()">Test Computer Vision</button>
      </div>
      <div class="result" id="ai-result">Click a button to test AI/ML modules...</div>
    </div>
    
    <div class="demo-section">
      <div class="demo-title">üîí Security Modules</div>
      <div class="controls">
        <button class="btn" onclick="testIAM()">Test IAM System</button>
        <button class="btn" onclick="testSecurityAudit()">Test Audit Log</button>
        <button class="btn" onclick="testVulnerabilityScanner()">Test Vulnerability Scanner</button>
      </div>
      <div class="result" id="security-result">Click a button to test security modules...</div>
    </div>
    
    <div class="demo-section">
      <div class="demo-title">‚õìÔ∏è Blockchain Modules</div>
      <div class="controls">
        <button class="btn" onclick="testBlockchainWallet()">Test Wallet</button>
        <button class="btn" onclick="testNFTMinting()">Test NFT Minting</button>
        <button class="btn" onclick="testSmartContract()">Test Smart Contract</button>
      </div>
      <div class="result" id="blockchain-result">Click a button to test blockchain modules...</div>
    </div>
    
    <div class="demo-section">
      <div class="demo-title">üìä Analytics Modules</div>
      <div class="controls">
        <button class="btn" onclick="testDataProfiling()">Test Data Profiling</button>
        <button class="btn" onclick="testRegressionAnalysis()">Test Regression</button>
        <button class="btn" onclick="testPredictiveModeling()">Test Predictive Modeling</button>
      </div>
      <div class="result" id="analytics-result">Click a button to test analytics modules...</div>
    </div>
    
    <div class="demo-section">
      <div class="demo-title">üé® UI Components</div>
      <div class="controls">
        <button class="btn" onclick="testModal()">Test Modal</button>
        <button class="btn" onclick="testProgressBar()">Test Progress Bar</button>
        <button class="btn" onclick="testRating()">Test Rating</button>
      </div>
      <div class="result" id="ui-result">Click a button to test UI components...</div>
    </div>
    
    <div class="demo-section">
      <div class="demo-title">‚ö° Performance Modules</div>
      <div class="controls">
        <button class="btn" onclick="testPerformanceProfiling()">Test Performance Profiling</button>
        <button class="btn" onclick="testLoadTesting()">Test Load Testing</button>
        <button class="btn" onclick="testCacheWarming()">Test Cache Warming</button>
      </div>
      <div class="result" id="performance-result">Click a button to test performance modules...</div>
    </div>
    
    <div class="status" id="status">Initializing Agent 6 integration...</div>
  </div>

  <!-- Agent 6 Root Integration -->
  <script src="ROOT-INTEGRATION.js?cb=feat-audit-agent6-rootintegration2"></script>
  <script src="INTEGRATE-TO-ROOT.js?cb=feat-audit-agent6-integratetoroot1"></script>

  <script>
    // Global status tracking
    let agent6Ready = false;
    let loadedModules = [];

    function updateStatus(message, type = 'info') {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = `status ${type}`;
    }

    function updateResult(elementId, message, type = 'info') {
      const result = document.getElementById(elementId);
      result.textContent = message;
      result.className = `result ${type}`;
    }

    function addToLoadedModules(moduleName) {
      if (!loadedModules.includes(moduleName)) {
        loadedModules.push(moduleName);
      }
    }

    // AI/ML Tests
    async function testLeadScoring() {
      try {
        updateResult('ai-result', 'Loading Lead Scoring module...', 'info');
        const leadScoring = await A6Root.getLeadScoring();
        const score = leadScoring.score({activity: 0.8, fit: 0.7, intent: 0.9});
        updateResult('ai-result', `‚úÖ Lead Score: ${score.toFixed(3)} (High quality lead!)`, 'success');
        addToLoadedModules('LeadScoring');
      } catch (error) {
        updateResult('ai-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testCustomerLifetimeValue() {
      try {
        updateResult('ai-result', 'Loading Customer Lifetime Value module...', 'info');
        const clv = await A6Root.getModule('CustomerLifetimeValue');
        const value = clv.clv({ arpu: 100, retentionMonths: 24, margin: 0.3 });
        updateResult('ai-result', `‚úÖ Customer Lifetime Value: $${value.toFixed(2)}`, 'success');
        addToLoadedModules('CustomerLifetimeValue');
      } catch (error) {
        updateResult('ai-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testComputerVision() {
      try {
        updateResult('ai-result', 'Loading Computer Vision module...', 'info');
        const cv = await A6Root.getModule('ComputerVision');
        const objects = cv.detectObjects('test-image');
        updateResult('ai-result', `‚úÖ Computer Vision: Detected ${objects.length} objects`, 'success');
        addToLoadedModules('ComputerVision');
      } catch (error) {
        updateResult('ai-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // Security Tests
    async function testIAM() {
      try {
        updateResult('security-result', 'Loading IAM System module...', 'info');
        const iam = await A6Root.getIAM();
        
        iam.addPermission('read');
        iam.addPermission('write');
        iam.addRole('editor', ['read', 'write']);
        iam.addUser('john_doe', ['editor']);
        
        const canRead = iam.can('john_doe', 'read');
        const canWrite = iam.can('john_doe', 'write');
        const canDelete = iam.can('john_doe', 'delete');
        
        updateResult('security-result', `‚úÖ User john_doe - Read: ${canRead}, Write: ${canWrite}, Delete: ${canDelete}`, 'success');
        addToLoadedModules('IamSystem');
      } catch (error) {
        updateResult('security-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testSecurityAudit() {
      try {
        updateResult('security-result', 'Loading Security Audit Log module...', 'info');
        const audit = await A6Root.getModule('SecurityAuditLog');
        
        audit.log('login', 'user123', { ip: '192.168.1.1' });
        audit.log('permission_granted', 'admin', { permission: 'admin_access' });
        
        const logs = audit.query({ severity: 'info' });
        updateResult('security-result', `‚úÖ Security Audit: Found ${logs.length} log entries with severity 'info'`, 'success');
        addToLoadedModules('SecurityAuditLog');
      } catch (error) {
        updateResult('security-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testVulnerabilityScanner() {
      try {
        updateResult('security-result', 'Loading Vulnerability Scanner module...', 'info');
        const scanner = await A6Root.getModule('VulnerabilityScanner');
        
        scanner.addPlugin({ name: 'web', scan: async () => [{ severity: 'high', target: 'web.com' }] });
        const scan = await scanner.scan('localhost');
        
        updateResult('security-result', `‚úÖ Vulnerability Scanner: Found ${scan.findings.length} findings`, 'success');
        addToLoadedModules('VulnerabilityScanner');
      } catch (error) {
        updateResult('security-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // Blockchain Tests
    async function testBlockchainWallet() {
      try {
        updateResult('blockchain-result', 'Loading Blockchain Wallet module...', 'info');
        const wallet = await A6Root.getBlockchainWallet();
        
        await wallet.generate();
        const publicKey = await wallet.exportPublicKeyRaw();
        
        updateResult('blockchain-result', `‚úÖ Blockchain Wallet: Generated successfully! Public key length: ${publicKey?.length || 0} bytes`, 'success');
        addToLoadedModules('BlockchainWallet');
      } catch (error) {
        updateResult('blockchain-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testNFTMinting() {
      try {
        updateResult('blockchain-result', 'Loading NFT Minting module...', 'info');
        const nft = await A6Root.getModule('NftMinting');
        
        const metadata = {
          name: 'Test NFT',
          description: 'A test NFT created with Agent 6',
          image: 'https://example.com/image.jpg'
        };
        
        const newNFT = nft.mint('0x123...', metadata);
        updateResult('blockchain-result', `‚úÖ NFT Minted! Token ID: ${newNFT.tokenId}, Creator: ${newNFT.creator}`, 'success');
        addToLoadedModules('NftMinting');
      } catch (error) {
        updateResult('blockchain-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testSmartContract() {
      try {
        updateResult('blockchain-result', 'Loading Smart Contract Deployment module...', 'info');
        const deploy = await A6Root.getModule('SmartContractDeployment');
        
        const bytecode = '608060405234801561001057600080fd5b50';
        const address = await deploy.deploy(bytecode);
        
        updateResult('blockchain-result', `‚úÖ Smart Contract Deployed! Address: ${address.substring(0, 10)}...`, 'success');
        addToLoadedModules('SmartContractDeployment');
      } catch (error) {
        updateResult('blockchain-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // Analytics Tests
    async function testDataProfiling() {
      try {
        updateResult('analytics-result', 'Loading Data Profiling module...', 'info');
        const profiling = await A6Root.getModule('DataProfiling');
        
        const data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        const summary = profiling.numericSummary(data);
        
        updateResult('analytics-result', `‚úÖ Data Profiling: Mean = ${summary.mean.toFixed(2)}, Std Dev = ${summary.std.toFixed(2)}, Min = ${summary.min}, Max = ${summary.max}`, 'success');
        addToLoadedModules('DataProfiling');
      } catch (error) {
        updateResult('analytics-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testRegressionAnalysis() {
      try {
        updateResult('analytics-result', 'Loading Regression Analysis module...', 'info');
        const regression = await A6Root.getModule('RegressionAnalysis');
        
        const x = [1, 2, 3, 4, 5];
        const y = [2, 4, 6, 8, 10];
        const result = regression.linear(x, y);
        
        updateResult('analytics-result', `‚úÖ Regression Analysis: Slope = ${result.slope.toFixed(3)}, Intercept = ${result.intercept.toFixed(3)}`, 'success');
        addToLoadedModules('RegressionAnalysis');
      } catch (error) {
        updateResult('analytics-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testPredictiveModeling() {
      try {
        updateResult('analytics-result', 'Loading Predictive Modeling module...', 'info');
        const modeling = await A6Root.getModule('PredictiveModeling');
        
        const data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        const prediction = modeling.predictNext(data);
        
        updateResult('analytics-result', `‚úÖ Predictive Modeling: Next value predicted = ${prediction.toFixed(2)}`, 'success');
        addToLoadedModules('PredictiveModeling');
      } catch (error) {
        updateResult('analytics-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // UI Tests
    async function testModal() {
      try {
        updateResult('ui-result', 'Loading Modal UI component...', 'info');
        const modal = await A6Root.getModal();
        
        modal.open('Agent 6 Modal', 'This is a modal created with Agent 6 UI components!');
        
        setTimeout(() => {
          modal.close();
          updateResult('ui-result', '‚úÖ Modal: Opened and closed successfully!', 'success');
        }, 2000);
        
        addToLoadedModules('Modal');
      } catch (error) {
        updateResult('ui-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testProgressBar() {
      try {
        updateResult('ui-result', 'Loading Progress Bar UI component...', 'info');
        const progressBar = await A6Root.getModule('ProgressBar');
        
        progressBar.setValue(75);
        updateResult('ui-result', `‚úÖ Progress Bar: Set to ${progressBar.getValue()}%`, 'success');
        addToLoadedModules('ProgressBar');
      } catch (error) {
        updateResult('ui-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testRating() {
      try {
        updateResult('ui-result', 'Loading Rating UI component...', 'info');
        const rating = await A6Root.getModule('Rating');
        
        rating.setValue(4);
        updateResult('ui-result', `‚úÖ Rating: Set to ${rating.getValue()}/5 stars`, 'success');
        addToLoadedModules('Rating');
      } catch (error) {
        updateResult('ui-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // Performance Tests
    async function testPerformanceProfiling() {
      try {
        updateResult('performance-result', 'Loading Performance Profiling module...', 'info');
        const profiling = await A6Root.getModule('PerformanceProfiling');
        
        profiling.start();
        
        // Simulate some work
        for (let i = 0; i < 1000000; i++) {
          Math.random() * Math.random();
        }
        
        profiling.stop();
        
        updateResult('performance-result', `‚úÖ Performance Profiling: Completed profiling session`, 'success');
        addToLoadedModules('PerformanceProfiling');
      } catch (error) {
        updateResult('performance-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testLoadTesting() {
      try {
        updateResult('performance-result', 'Loading Load Testing module...', 'info');
        const loadTesting = await A6Root.getModule('LoadTesting');
        
        const results = loadTesting.runLoadTest('https://api.example.com', 100);
        
        updateResult('performance-result', `‚úÖ Load Testing: Test completed - ${results.totalRequests} requests, ${results.successRate}% success rate`, 'success');
        addToLoadedModules('LoadTesting');
      } catch (error) {
        updateResult('performance-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    async function testCacheWarming() {
      try {
        updateResult('performance-result', 'Loading Cache Warming module...', 'info');
        const cacheWarming = await A6Root.getModule('CacheWarming');
        
        const urls = ['https://api.example.com/data1', 'https://api.example.com/data2'];
        const warmed = cacheWarming.warmCache(urls);
        
        updateResult('performance-result', `‚úÖ Cache Warming: Warmed ${warmed.length} URLs`, 'success');
        addToLoadedModules('CacheWarming');
      } catch (error) {
        updateResult('performance-result', `‚ùå Error: ${error.message}`, 'error');
      }
    }

    // Initialize Agent 6
    window.addEventListener('load', async () => {
      try {
        updateStatus('Initializing Agent 6 integration...', 'loading');
        
        // Wait for Agent 6 to be ready
        await A6Root.init();
        
        updateStatus('‚úÖ Agent 6 integration loaded successfully!', 'success');
        
        // Show loaded modules
        const health = await A6Root.healthCheck();
        console.log('Agent 6 Health:', health);
        
        // Auto-run a quick test
        setTimeout(() => {
          testLeadScoring();
        }, 1000);
        
      } catch (error) {
        updateStatus(`‚ùå Error initializing Agent 6: ${error.message}`, 'error');
        console.error('Agent 6 initialization error:', error);
      }
    });
  </script>
</body>
</html>